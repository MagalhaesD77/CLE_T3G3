\hypertarget{sharedRegion_8c}{}\doxysection{/home/diogo/\+Universidade/\+Mestrado/1º\+Ano/2º\+Semestre/\+CLE/\+CLE-\/\+Projeto1/prog1/shared\+Region.c File Reference}
\label{sharedRegion_8c}\index{/home/diogo/Universidade/Mestrado/1ºAno/2ºSemestre/CLE/CLE-\/Projeto1/prog1/sharedRegion.c@{/home/diogo/Universidade/Mestrado/1ºAno/2ºSemestre/CLE/CLE-\/Projeto1/prog1/sharedRegion.c}}


Problem name\+: Portuguese Text processing.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include \char`\"{}shared\+Region.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}utils.\+h\char`\"{}}\newline
Include dependency graph for shared\+Region.\+c\+:
% FIG 0
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{sharedRegion_8c_aac00102c9ffd0d7b1734b4cff343cd63}\label{sharedRegion_8c_aac00102c9ffd0d7b1734b4cff343cd63}} 
void {\bfseries join\+Results} ()
\begin{DoxyCompactList}\small\item\em Join the counting results from each thread for each file. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sharedRegion_8c_a7227a27d959ebccebb6f10536cf4aa75}\label{sharedRegion_8c_a7227a27d959ebccebb6f10536cf4aa75}} 
void {\bfseries print\+Results} ()
\begin{DoxyCompactList}\small\item\em Print the results of the counting. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sharedRegion_8c_a4db13233644521cac4a1e481596d65ef}{add\+\_\+thread\+\_\+counts}} (unsigned int worker\+Id, int words, int multi\+Cons\+Words)
\begin{DoxyCompactList}\small\item\em Add the partial counting results from a thread for a file to the shared region. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sharedRegion_8c_a9a22e628338c48ee5d42e5884d88bd91}\label{sharedRegion_8c_a9a22e628338c48ee5d42e5884d88bd91}} 
void {\bfseries initialize\+Countings} ()
\begin{DoxyCompactList}\small\item\em Initialize the counting arrays for the threads in the shared region. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sharedRegion_8c_af1538322795e5d9e0dd94dc637d9b037}{get\+Data}} (unsigned int worker\+Id, char $\ast$buffer, int $\ast$return\+Status)
\begin{DoxyCompactList}\small\item\em Get next buffer of data from the active file in the shared region. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sharedRegion_8c_a17b3fbf8ac1bd578e64b30519d07016b}{mutex\+\_\+lock}} (pthread\+\_\+mutex\+\_\+t $\ast$mutex, unsigned int worker\+Id)
\begin{DoxyCompactList}\small\item\em Lock the mutex. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sharedRegion_8c_af8b82334850dc23feba6af7970c1f5e0}{mutex\+\_\+unlock}} (pthread\+\_\+mutex\+\_\+t $\ast$mutex, unsigned int worker\+Id)
\begin{DoxyCompactList}\small\item\em Unlock the mutex. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sharedRegion_8c_a49bde40cb19d15b8321991b2de3a988d}{add\+\_\+file}} (char $\ast$file\+Name)
\begin{DoxyCompactList}\small\item\em Add a file to the shared region. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{sharedRegion_8c_acd868b85af9beb3eebfabdeeaa1930de}\label{sharedRegion_8c_acd868b85af9beb3eebfabdeeaa1930de}} 
int $\ast$ {\bfseries worker\+Status}
\begin{DoxyCompactList}\small\item\em worker threads return status array \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sharedRegion_8c_a505ef4892472218f497bab84ba8dcfa9}\label{sharedRegion_8c_a505ef4892472218f497bab84ba8dcfa9}} 
int $\ast$ {\bfseries worker\+File\+Status}
\begin{DoxyCompactList}\small\item\em worker threads current file array \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sharedRegion_8c_a8556d19b129aa550f5b2819ed0320e83}{buffer\+Size}}
\begin{DoxyCompactList}\small\item\em max number of bytes per chunk \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sharedRegion_8c_a8adda9db6d1fb7be6f86999c24c75ab0}\label{sharedRegion_8c_a8adda9db6d1fb7be6f86999c24c75ab0}} 
int {\bfseries n\+Threads}
\begin{DoxyCompactList}\small\item\em number of threads \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sharedRegion_8c_a3398b7c83dae999ec09d22d5e2d07e82}\label{sharedRegion_8c_a3398b7c83dae999ec09d22d5e2d07e82}} 
int $\ast$$\ast$ {\bfseries words\+Count}
\begin{DoxyCompactList}\small\item\em words parcial results \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sharedRegion_8c_aa4ff3a84885d09d57c0f848211a89893}\label{sharedRegion_8c_aa4ff3a84885d09d57c0f848211a89893}} 
int $\ast$$\ast$ {\bfseries multi\+Cons\+Words\+Count}
\begin{DoxyCompactList}\small\item\em multi consonant words parcial results \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sharedRegion_8c_a3b14a55a3b34f1fa66cf40db2c380d45}\label{sharedRegion_8c_a3b14a55a3b34f1fa66cf40db2c380d45}} 
struct \mbox{\hyperlink{structcustomFile}{custom\+File}} $\ast$ {\bfseries files}
\begin{DoxyCompactList}\small\item\em storage region \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sharedRegion_8c_a05e55b0ae2330d96985d927d82c56473}\label{sharedRegion_8c_a05e55b0ae2330d96985d927d82c56473}} 
int {\bfseries curr\+File\+Index} = 0
\begin{DoxyCompactList}\small\item\em current file index being processed \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sharedRegion_8c_ac55fe61967bfc3ea816d6d4ed88a142c}{num\+Files}} = 0
\begin{DoxyCompactList}\small\item\em number of files to process \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Problem name\+: Portuguese Text processing. 

(implementation file)

Synchronization based on monitors. Both threads and the monitor are implemented using the pthread library which enables the creation of a monitor of the Lampson / Redell type.

Data transfer region implemented as a monitor.

Problem Data Structures. \begin{DoxyItemize}
\item \mbox{\hyperlink{structcustomFile}{custom\+File}} \item \mbox{\hyperlink{structworkerData}{worker\+Data}}\end{DoxyItemize}
Definition of the operations carried out by the workers / main threads\+: \begin{DoxyItemize}
\item initialize\+Countings \item add\+\_\+file \item join\+Results \item print\+Results \item get\+Data \item mutex\+\_\+lock \item mutex\+\_\+unlock \item add\+\_\+thread\+\_\+counts\end{DoxyItemize}
\begin{DoxyAuthor}{Author}
Diogo Magalhães \& Rafael Gil -\/ March 2024 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{sharedRegion_8c_a49bde40cb19d15b8321991b2de3a988d}\label{sharedRegion_8c_a49bde40cb19d15b8321991b2de3a988d}} 
\index{sharedRegion.c@{sharedRegion.c}!add\_file@{add\_file}}
\index{add\_file@{add\_file}!sharedRegion.c@{sharedRegion.c}}
\doxysubsubsection{\texorpdfstring{add\_file()}{add\_file()}}
{\footnotesize\ttfamily int add\+\_\+file (\begin{DoxyParamCaption}\item[{char $\ast$}]{file\+Name }\end{DoxyParamCaption})}



Add a file to the shared region. 


\begin{DoxyParams}{Parameters}
{\em filename} & file to be added \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{sharedRegion_8c_a4db13233644521cac4a1e481596d65ef}\label{sharedRegion_8c_a4db13233644521cac4a1e481596d65ef}} 
\index{sharedRegion.c@{sharedRegion.c}!add\_thread\_counts@{add\_thread\_counts}}
\index{add\_thread\_counts@{add\_thread\_counts}!sharedRegion.c@{sharedRegion.c}}
\doxysubsubsection{\texorpdfstring{add\_thread\_counts()}{add\_thread\_counts()}}
{\footnotesize\ttfamily void add\+\_\+thread\+\_\+counts (\begin{DoxyParamCaption}\item[{unsigned int}]{worker\+Id,  }\item[{int}]{words,  }\item[{int}]{multi\+Cons\+Words }\end{DoxyParamCaption})}



Add the partial counting results from a thread for a file to the shared region. 


\begin{DoxyParams}{Parameters}
{\em worker\+Id} & worker identification \\
\hline
{\em words} & number of words \\
\hline
{\em multi\+Cons\+Words} & number of words with at least two instances of the same consonant \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{sharedRegion_8c_af1538322795e5d9e0dd94dc637d9b037}\label{sharedRegion_8c_af1538322795e5d9e0dd94dc637d9b037}} 
\index{sharedRegion.c@{sharedRegion.c}!getData@{getData}}
\index{getData@{getData}!sharedRegion.c@{sharedRegion.c}}
\doxysubsubsection{\texorpdfstring{getData()}{getData()}}
{\footnotesize\ttfamily void get\+Data (\begin{DoxyParamCaption}\item[{unsigned int}]{worker\+Id,  }\item[{char $\ast$}]{buffer,  }\item[{int $\ast$}]{return\+Status }\end{DoxyParamCaption})}



Get next buffer of data from the active file in the shared region. 


\begin{DoxyParams}{Parameters}
{\em worker\+Id} & worker identification \\
\hline
{\em buffer} & buffer to store the data \\
\hline
{\em return\+Status} & return status \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{sharedRegion_8c_a17b3fbf8ac1bd578e64b30519d07016b}\label{sharedRegion_8c_a17b3fbf8ac1bd578e64b30519d07016b}} 
\index{sharedRegion.c@{sharedRegion.c}!mutex\_lock@{mutex\_lock}}
\index{mutex\_lock@{mutex\_lock}!sharedRegion.c@{sharedRegion.c}}
\doxysubsubsection{\texorpdfstring{mutex\_lock()}{mutex\_lock()}}
{\footnotesize\ttfamily void mutex\+\_\+lock (\begin{DoxyParamCaption}\item[{pthread\+\_\+mutex\+\_\+t $\ast$}]{mutex,  }\item[{unsigned int}]{worker\+Id }\end{DoxyParamCaption})}



Lock the mutex. 


\begin{DoxyParams}{Parameters}
{\em mutex} & mutex to be locked \\
\hline
{\em worker\+Id} & worker identification \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{sharedRegion_8c_af8b82334850dc23feba6af7970c1f5e0}\label{sharedRegion_8c_af8b82334850dc23feba6af7970c1f5e0}} 
\index{sharedRegion.c@{sharedRegion.c}!mutex\_unlock@{mutex\_unlock}}
\index{mutex\_unlock@{mutex\_unlock}!sharedRegion.c@{sharedRegion.c}}
\doxysubsubsection{\texorpdfstring{mutex\_unlock()}{mutex\_unlock()}}
{\footnotesize\ttfamily void mutex\+\_\+unlock (\begin{DoxyParamCaption}\item[{pthread\+\_\+mutex\+\_\+t $\ast$}]{mutex,  }\item[{unsigned int}]{worker\+Id }\end{DoxyParamCaption})}



Unlock the mutex. 


\begin{DoxyParams}{Parameters}
{\em mutex} & mutex to be unlocked \\
\hline
{\em worker\+Id} & worker identification \\
\hline
\end{DoxyParams}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{sharedRegion_8c_a8556d19b129aa550f5b2819ed0320e83}\label{sharedRegion_8c_a8556d19b129aa550f5b2819ed0320e83}} 
\index{sharedRegion.c@{sharedRegion.c}!bufferSize@{bufferSize}}
\index{bufferSize@{bufferSize}!sharedRegion.c@{sharedRegion.c}}
\doxysubsubsection{\texorpdfstring{bufferSize}{bufferSize}}
{\footnotesize\ttfamily int buffer\+Size\hspace{0.3cm}{\ttfamily [extern]}}



max number of bytes per chunk 

max number of bytes per chunk \mbox{\Hypertarget{sharedRegion_8c_ac55fe61967bfc3ea816d6d4ed88a142c}\label{sharedRegion_8c_ac55fe61967bfc3ea816d6d4ed88a142c}} 
\index{sharedRegion.c@{sharedRegion.c}!numFiles@{numFiles}}
\index{numFiles@{numFiles}!sharedRegion.c@{sharedRegion.c}}
\doxysubsubsection{\texorpdfstring{numFiles}{numFiles}}
{\footnotesize\ttfamily int num\+Files = 0}



number of files to process 

number of files 